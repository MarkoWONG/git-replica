#!/bin/dash
# Written by Marko Wong (z5309371)
# Girt-merge adds the changes that have been made to the specified branch or 
# commit to the index, and commits them

# Error check: There must be an existing .girt repository
if [ -d .girt ]
then :
else 
    echo "girt-merge: error: girt repository directory .girt not found"
    exit 1;
fi

# Error check: There must be an existing commit
if [ -d .girt/commit_0 ]
then
    :
else
    echo "girt-merge: error: this command can not be run until after the first commit"
    exit 1;
fi

# Error cases
if [ $# -eq 1 ]
then
    echo "girt-merge: error: empty commit message";
    exit 1;
fi
if [ $# -ne 3 ]
then 
    echo "usage: girt-merge <branch|commit> -m message";
    exit 1;
elif [ "$2" != "-m" ]
    echo "usage: girt-merge <branch|commit> -m message";
    exit 1;
fi

# all commits can be accessed anywhere 
# index is synced with branch along with cwd
# no new commit is created
if [ -d .girt/"$1" ] || [ -d .girt/branches/"$1" ]
then
    if [ -d .girt/"$1" ] && [ "$1" != "adds" ]
    then

else 
    echo "girt-merge: error: unknown branch '"$1"'"
fi


exit 0;
